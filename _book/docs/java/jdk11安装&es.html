<p><br></p><attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-34bb6a89-6bb5-404c-9972-3151e389ce61"></attachment><p>下载地址：<a href="https://www.oracle.com/java/technologies/javase-jdk11-downloads.html" target="_blank">https://www.oracle.com/java/technologies/javase-jdk11-downloads.html</a></p><p><br></p><p>tar zxvf jdk-11.0.8<em>linux-x64</em>bin.tar.gz -C /usr/local</p><p><br></p><p>配置环境变量 ：</p><p>vi /etc/profile</p><p><br></p><p>末尾添加：</p><p>export JAVA_HOME=/usr/local/jdk-11.0.8</p><p>export PATH=$JAVA_HOME/bin:$PATH</p><p><br></p><p>java -version</p><p><br></p><p><br></p><p>elasticsearch 创建用户：</p><p><br></p><p><code style="background-color: initial; color: rgb(0, 0, 0);">groupadd es</code></p><p><code style="background-color: initial; color: rgb(255, 20, 147);">useradd</code>&nbsp;<code style="background-color: initial; color: rgb(0, 0, 0);">es -g es -p es</code></p><p>chown -R es:es /usr/local/elasticsearch-7.4.0</p><p><code style="background-color: initial; color: rgb(255, 20, 147);">su</code>&nbsp;<code style="background-color: initial; color: rgb(0, 0, 0);">es</code></p><p><br></p><p><br></p><p>配置文件修改：</p><p><br></p><p>/usr/local/elasticsearch-7.4.0/config/elasticsearch.yml</p><p><br></p><pre class="ql-syntax" spellcheck="false">-- 允许外部IP访问
network.host: 0.0.0.0

-- 把这个注释先放开
cluster.initial_master_nodes: ["node-1", "node-2"]
</pre><p><br></p><p>还有端口</p><p><br></p><p><br></p><p><br></p><p><br></p><p>启动：</p><p>用es用户</p><p><span style="color: rgb(77, 77, 77);">bin/elasticsearch &amp;</span></p><p><br></p><p><br></p><p><span style="color: rgb(77, 77, 77);">报错处理：</span></p><p><span style="color: rgb(51, 51, 51);">[1]: max file descriptors [65535] for elasticsearch process is too low, increase to at least [65536]</span></p><p><span style="color: rgb(51, 51, 51);">编辑 /etc/security/limits.conf，追加以下内容；</span></p><p><span style="color: rgb(51, 51, 51);">* soft nofile 65536</span></p><p><span style="color: rgb(51, 51, 51);">* hard nofile 65536</span></p><p><span style="color: rgb(51, 51, 51);">此文件修改后需要重新登录用户，才会生效</span></p><p><br></p><p><span style="color: rgb(51, 51, 51);">[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span></p><p><span style="color: rgb(51, 51, 51);">编辑 /etc/sysctl.conf，追加以下内容：</span></p><p><span style="color: rgb(51, 51, 51);">vm.max_map_count=655360</span></p><p><span style="color: rgb(51, 51, 51);">保存后，执行：</span></p><p><span style="color: rgb(51, 51, 51);">sysctl -p</span></p><p><br></p><p><br></p><p>设置开机启动</p><p><br></p><p><span style="color: rgb(77, 77, 77);">在/etc/systemd/system目录下创建elasticsearch.service文件</span></p><p><br></p><p>[Unit]</p><p>Description=elasticsearch</p><p>[Service]</p><p>User=es</p><p>LimitNOFILE=100000</p><p>LimitNPROC=100000</p><p>ExecStart=/usr/local/elasticsearch-7.4.0/bin/elasticsearch</p><p>[Install]</p><p>WantedBy=multi-user.target</p><p><br></p><p><br></p>